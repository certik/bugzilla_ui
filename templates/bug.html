{% extends "base.html" %}

{% block title %}
Issue {{ bug.bug_id }} - {{ bug.short_desc }}
{% endblock %}

{% block content %}
    <div id="content">
        <div id="header" class="panel">
            <a href="/bugs-ui/">Issues</a>
            <span class="bar">|</span>
            <a href="/bugs-ui/new/">New Issue</a>
            <span class="bar">|</span>
            <form action="/bugs-ui/" method="GET">
                Search {{ form.issue_types }} for {{ form.search_text }}
                <input type="submit" value="Search"/>
            </form>
            <span class="bar">|</span>
            <a href="/bugs-ui/search/">Advanced Search</a>
        </div>
        <div id="issue" class="panel">
            <b>Issue <a href="http://hpfem.org/bugs/show_bug.cgi?id={{ bug.bug_id }}">{{ bug.bug_id }}</a>: {{ bug.short_desc }}</b>
            <span id="prevnext">
                <a href="/bugs-ui/bug/{{ prev_bug }}/">&laquo; Prev</a>
                <a href="/bugs-ui/bug/{{ next_bug }}/">Next &raquo;</a>
            </span>
        </div>
        <div id="metadata">
            <table>
                <tr><td><b>Status:</b></td><td><a class="label" href="/bugs-ui/?status={{ bug.bug_status }}">{{ bug.bug_status|lower|capfirst }}</a></td></tr>
                <tr><td><b>Product:</b></td><td><a class="label" href="/bugs-ui/?product={{ bug.product.id }}">{{ bug.product.name }}</a></td></tr>
                <tr><td><b>Platform:</b></td><td>{{ bug.rep_platform }}</td></tr>
                <tr><td><b>Priority:</b></td><td><a class="label" href="/bugs-ui/?priority={{ bug.priority }}">{{ bug.priority }}</a></td></tr>
                <tr><td>Bugzilla:</td><td><a href="http://hpfem.org/bugs/show_bug.cgi?id={{ bug.bug_id }}">{{ bug.bug_id }}</a></td></tr>
            </table>
        </div>
        <div id="comments">
            <div class="comment">
                <div class="comment_head">
                    Reported by <a href="/bugs-ui/u/{{ comments_first.who.login_name }}/">{{ comments_first.who.realname }}</a>,
                    {{ comments_first.bug_when }}
                </div>
                <div class="comment_body">
                    <pre>{{ comments_first.thetext|urlize }}</pre>
                </div>
            </div>
            {% for comment in comments_other %}
            <div class="comment">
                <div class="comment_head">
                    Comment <a href="/bugs-ui/bug/{{ bug.bug_id }}/#{{ forloop.counter }}">{{ forloop.counter }}</a>
                    by <a href="/bugs-ui/u/{{ comments_first.who.login_name }}/">{{ comment.who.realname }}</a>,
                    {{ comment.bug_when }}
                </div>
                <div class="comment_body">
                    <pre>{{ comment.thetext|urlize }}</pre>
                </div>
            </div>
            {% endfor %}
        </div>
        {% if attachments %}
        <div class="attachments">
            <b>Attachments:</b>
            <table class="attachments">
                <tr>
                    <th>File</th>
                    <th>Submitter</th>
                    <th>Date</th>
                </tr>

                {% for a in attachments %}
                <tr>
                    <td>{{ a.filename }} (view, <a href="/bugs-ui/attachment/{{ a.attach_id }}">download</a>)</td>
                    <td>{{ a.submitter.realname }}</td>
                    <td>{{ a.creation_ts }})</td>
                </tr>
                {% endfor %}
            </table>
        </div>
        {% endif %}
    </div>
{% endblock %}

